<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Invitaci√≥n 15 A√±os</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Poppins', sans-serif;
    }
    #intro {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: linear-gradient(135deg, #d63384, #6f42c1);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      text-align: center;
      z-index: 10;
      padding: 20px;
    }
    #intro h1 {
      font-size: 2rem;
      margin-bottom: 10px;
    }
    #intro p {
      font-size: 1.2rem;
      margin-bottom: 20px;
    }
    #start-btn {
      background: white;
      color: #d63384;
      border: none;
      padding: 12px 24px;
      border-radius: 30px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    #start-btn:hover {
      background: #f8f9fa;
      transform: scale(1.05);
    }
    #map {
      height: 100%;
      width: 100%;
      display: none;
    }
  </style>
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdO-5ZVOSsWWuwt3Xjco_KqX7PHR1ZmRk&libraries=places&callback=initMap">
  </script>
</head>
<body>
  <!-- Pantalla de bienvenida -->
  <div id="intro">
    <h1>‚ú® Tu carruaje est√° listo ‚ú®</h1>
    <p>Prep√°rate para el viaje m√°gico hacia el castillo üè∞</p>
    <button id="start-btn">Iniciar viaje</button>
  </div>

  <!-- Mapa -->
  <div id="map"></div>

  <script>
    const destino = { lat: 5.7241147, lng: -72.9227588 }; // Centro Comercial Iwoka
    let carruaje; // marcador del carruaje
    let map, directionsService, directionsRenderer;
  
    document.getElementById("start-btn").addEventListener("click", () => {
      document.getElementById("intro").style.display = "none";
      document.getElementById("map").style.display = "block";
  
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(initMap, () => {
          alert("No se pudo obtener tu ubicaci√≥n. Activa GPS.");
        });
      } else {
        alert("Tu navegador no soporta geolocalizaci√≥n.");
      }
    });
  
    function initMap(position) {
      const origen = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };
  
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 14,
        center: origen,
      });
  
      directionsService = new google.maps.DirectionsService();
      directionsRenderer = new google.maps.DirectionsRenderer({
        suppressMarkers: true,
        polylineOptions: {
          strokeColor: "#ff66b2",
          strokeWeight: 5,
        },
      });
      directionsRenderer.setMap(map);
  
      directionsService.route(
        {
          origin: origen,
          destination: destino,
          travelMode: google.maps.TravelMode.DRIVING,
        },
        (response, status) => {
          if (status === "OK") {
            directionsRenderer.setDirections(response);
  
            // Castillo
            new google.maps.Marker({
              position: destino,
              map,
              icon: {
                url: "castle.svg",
                scaledSize: new google.maps.Size(60, 60),
              },
              title: "El Castillo",
            });
  
            // Carruaje inicial
            carruaje = new google.maps.Marker({
              position: origen,
              map,
              icon: {
                url: "carriage.svg",
                scaledSize: new google.maps.Size(50, 50),
              },
              title: "Tu carruaje",
            });
  
            // üëâ Mantener actualizado seg√∫n se mueva el usuario
            navigator.geolocation.watchPosition((pos) => {
              const nuevaPos = {
                lat: pos.coords.latitude,
                lng: pos.coords.longitude,
              };
              carruaje.setPosition(nuevaPos);
              map.setCenter(nuevaPos); // opcional: centrar el mapa en el carruaje
            });
          } else {
            alert("No se pudo calcular la ruta: " + status);
          }
        }
      );
    }
  </script>
</body>
</html>
